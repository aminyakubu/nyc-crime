<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Yaa Klu" />

<meta name="date" content="2018-11-17" />

<title>Final_project</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="exploratory.html">Exploratory Analyses</a>
</li>
<li>
  <a href="mailto:&lt;jmc2392@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/aminyakubu/nyc-crime/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Final_project</h1>
<h4 class="author"><em>Yaa Klu</em></h4>
<h4 class="date"><em>11/17/2018</em></h4>

</div>


<pre class="r"><code>library(tidyverse)
crime_nyc = readRDS(file = &quot;datasets/nyc_felony_crimes.rds&quot;)

crime_nyc %&gt;% filter(law_cat_cd == &quot;felony&quot;) %&gt;% distinct(pd_cd, pd_desc) %&gt;% 
  mutate(x = str_detect(pd_desc, &quot;rape&quot;)) %&gt;% 
  View</code></pre>
<pre class="r"><code>library(tidyverse)</code></pre>
<p><strong>Crime category by race/ethnicity, age, sex and other sociodemographics</strong> ** top ten offense, general chracteristics<strong> </strong> top 5, general characteristics<strong> </strong>filter out unknown and analyze top 5 crimes for unknowns**</p>
<p>Removing missing variables</p>
<pre class="r"><code>com_crime_nyc = crime_nyc %&gt;% 
  janitor::clean_names(dat = .) %&gt;% 
  filter(!is.na(susp_sex)) %&gt;%
  filter(!is.na(susp_age_group)) %&gt;%
  filter(!is.na(vic_sex)) %&gt;%
  filter(!is.na(vic_age_group)) %&gt;%
  filter(!is.na(vic_race)) %&gt;%
  filter(!is.na(susp_race))</code></pre>
<p>Highest number of crimes (top 5)</p>
<pre class="r"><code>com_crime_nyc %&gt;%
  distinct(pd_desc) %&gt;%
  count()</code></pre>
<pre><code>## # A tibble: 1 x 1
##       n
##   &lt;int&gt;
## 1   213</code></pre>
<pre class="r"><code>com_crime_nyc %&gt;%
  filter(law_cat_cd == &quot;felony&quot;) %&gt;% 
  group_by(pd_desc, pd_cd) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(10, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable() </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">pd_desc</th>
<th align="left">pd_cd</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">assault 2,1,unclassified</td>
<td align="left">109</td>
<td align="right">44270</td>
</tr>
<tr class="even">
<td align="left">criminal contempt 1</td>
<td align="left">198</td>
<td align="right">25455</td>
</tr>
<tr class="odd">
<td align="left">robbery,personal electronic device</td>
<td align="left">386</td>
<td align="right">10930</td>
</tr>
<tr class="even">
<td align="left">robbery,open area unclassified</td>
<td align="left">397</td>
<td align="right">8998</td>
</tr>
<tr class="odd">
<td align="left">mischief,criminal, uncl 2nd</td>
<td align="left">269</td>
<td align="right">8675</td>
</tr>
<tr class="even">
<td align="left">strangulation 1st</td>
<td align="left">105</td>
<td align="right">8159</td>
</tr>
<tr class="odd">
<td align="left">forgery,etc.,unclassified-felo</td>
<td align="left">729</td>
<td align="right">8115</td>
</tr>
<tr class="even">
<td align="left">weapons possession 3</td>
<td align="left">793</td>
<td align="right">6217</td>
</tr>
<tr class="odd">
<td align="left">burglary,residence,day</td>
<td align="left">221</td>
<td align="right">5381</td>
</tr>
<tr class="even">
<td align="left">mischief, criminal 3 &amp; 2, of m</td>
<td align="left">267</td>
<td align="right">5333</td>
</tr>
</tbody>
</table>
<p>Suspect Age</p>
<pre class="r"><code>com_crime_nyc %&gt;%
  group_by(susp_age_group) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(5, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable() </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">susp_age_group</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">unknown</td>
<td align="right">90145</td>
</tr>
<tr class="even">
<td align="left">25-44</td>
<td align="right">88550</td>
</tr>
<tr class="odd">
<td align="left">18-24</td>
<td align="right">41309</td>
</tr>
<tr class="even">
<td align="left">45-64</td>
<td align="right">27591</td>
</tr>
<tr class="odd">
<td align="left">&lt;18</td>
<td align="right">11531</td>
</tr>
</tbody>
</table>
<p>Suspect Sex</p>
<pre class="r"><code>com_crime_nyc %&gt;%
  group_by(susp_sex) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(3, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable() </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">susp_sex</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">m</td>
<td align="right">171270</td>
</tr>
<tr class="even">
<td align="left">u</td>
<td align="right">56662</td>
</tr>
<tr class="odd">
<td align="left">f</td>
<td align="right">32782</td>
</tr>
</tbody>
</table>
<p>Victim’s sex</p>
<pre class="r"><code>com_crime_nyc %&gt;%
  group_by(vic_sex) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(3, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable() </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vic_sex</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">f</td>
<td align="right">104643</td>
</tr>
<tr class="even">
<td align="left">m</td>
<td align="right">99208</td>
</tr>
<tr class="odd">
<td align="left">e</td>
<td align="right">32145</td>
</tr>
</tbody>
</table>
<p>Victim’s age</p>
<pre class="r"><code>com_crime_nyc %&gt;%
  group_by(vic_age_group) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(5, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable() </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vic_age_group</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">25-44</td>
<td align="right">94015</td>
</tr>
<tr class="even">
<td align="left">unknown</td>
<td align="right">62936</td>
</tr>
<tr class="odd">
<td align="left">45-64</td>
<td align="right">44114</td>
</tr>
<tr class="even">
<td align="left">18-24</td>
<td align="right">32805</td>
</tr>
<tr class="odd">
<td align="left">&lt;18</td>
<td align="right">14706</td>
</tr>
</tbody>
</table>
<p>Suspect’s age</p>
<pre class="r"><code>com_crime_nyc %&gt;%
  group_by(susp_race) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(5, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable() </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">susp_race</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">black</td>
<td align="right">106066</td>
</tr>
<tr class="even">
<td align="left">unknown</td>
<td align="right">66282</td>
</tr>
<tr class="odd">
<td align="left">white hispanic</td>
<td align="right">43845</td>
</tr>
<tr class="even">
<td align="left">white</td>
<td align="right">21080</td>
</tr>
<tr class="odd">
<td align="left">black hispanic</td>
<td align="right">14385</td>
</tr>
</tbody>
</table>
<p>Victim’s race</p>
<pre class="r"><code>com_crime_nyc %&gt;%
  group_by(vic_race) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(5, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vic_race</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">black</td>
<td align="right">72052</td>
</tr>
<tr class="even">
<td align="left">unknown</td>
<td align="right">68123</td>
</tr>
<tr class="odd">
<td align="left">white hispanic</td>
<td align="right">49005</td>
</tr>
<tr class="even">
<td align="left">white</td>
<td align="right">40332</td>
</tr>
<tr class="odd">
<td align="left">asian / pacific islander</td>
<td align="right">19303</td>
</tr>
</tbody>
</table>
<p>Suspect’s race</p>
<pre class="r"><code>com_crime_nyc %&gt;%
  group_by(pd_desc, susp_race) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(5, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">pd_desc</th>
<th align="left">susp_race</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">assault 2,1,unclassified</td>
<td align="left">black</td>
<td align="right">19349</td>
</tr>
<tr class="even">
<td align="left">criminal contempt 1</td>
<td align="left">black</td>
<td align="right">12186</td>
</tr>
<tr class="odd">
<td align="left">assault 2,1,unclassified</td>
<td align="left">white hispanic</td>
<td align="right">9213</td>
</tr>
<tr class="even">
<td align="left">assault 2,1,unclassified</td>
<td align="left">unknown</td>
<td align="right">7201</td>
</tr>
<tr class="odd">
<td align="left">robbery,personal electronic device</td>
<td align="left">black</td>
<td align="right">6029</td>
</tr>
</tbody>
</table>
<pre class="r"><code>com_crime_nyc %&gt;%
  group_by(susp_race, vic_race) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(5, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">susp_race</th>
<th align="left">vic_race</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">black</td>
<td align="left">black</td>
<td align="right">48186</td>
</tr>
<tr class="even">
<td align="left">black</td>
<td align="left">unknown</td>
<td align="right">30387</td>
</tr>
<tr class="odd">
<td align="left">white hispanic</td>
<td align="left">white hispanic</td>
<td align="right">19906</td>
</tr>
<tr class="even">
<td align="left">unknown</td>
<td align="left">black</td>
<td align="right">16444</td>
</tr>
<tr class="odd">
<td align="left">unknown</td>
<td align="left">white</td>
<td align="right">14946</td>
</tr>
</tbody>
</table>
<pre class="r"><code>com_crime_nyc %&gt;%
  group_by(susp_race, pd_desc) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(5, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">susp_race</th>
<th align="left">pd_desc</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">black</td>
<td align="left">assault 2,1,unclassified</td>
<td align="right">19349</td>
</tr>
<tr class="even">
<td align="left">black</td>
<td align="left">criminal contempt 1</td>
<td align="right">12186</td>
</tr>
<tr class="odd">
<td align="left">white hispanic</td>
<td align="left">assault 2,1,unclassified</td>
<td align="right">9213</td>
</tr>
<tr class="even">
<td align="left">unknown</td>
<td align="left">assault 2,1,unclassified</td>
<td align="right">7201</td>
</tr>
<tr class="odd">
<td align="left">black</td>
<td align="left">robbery,personal electronic device</td>
<td align="right">6029</td>
</tr>
</tbody>
</table>
<pre class="r"><code>com_crime_nyc %&gt;%
  group_by(pd_desc, susp_age_group) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(5, number) %&gt;%
  arrange(desc(number)) %&gt;%
  knitr::kable() </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">pd_desc</th>
<th align="left">susp_age_group</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">assault 2,1,unclassified</td>
<td align="left">25-44</td>
<td align="right">17072</td>
</tr>
<tr class="even">
<td align="left">criminal contempt 1</td>
<td align="left">25-44</td>
<td align="right">14486</td>
</tr>
<tr class="odd">
<td align="left">assault 2,1,unclassified</td>
<td align="left">unknown</td>
<td align="right">11356</td>
</tr>
<tr class="even">
<td align="left">assault 2,1,unclassified</td>
<td align="left">18-24</td>
<td align="right">6801</td>
</tr>
<tr class="odd">
<td align="left">assault 2,1,unclassified</td>
<td align="left">45-64</td>
<td align="right">6350</td>
</tr>
</tbody>
</table>
<p><strong>filter out unknown and analyze top 5 crimes for unknowns</strong></p>
<pre class="r"><code>filter(com_crime_nyc, susp_age_group == &#39;unknown&#39;) %&gt;%
  group_by(pd_cd) %&gt;%
  summarise(n = n()) %&gt;%
  filter() %&gt;%
  knitr::kable() </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">pd_cd</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">103</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">104</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">105</td>
<td align="right">311</td>
</tr>
<tr class="even">
<td align="left">106</td>
<td align="right">119</td>
</tr>
<tr class="odd">
<td align="left">107</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">108</td>
<td align="right">20</td>
</tr>
<tr class="odd">
<td align="left">109</td>
<td align="right">11356</td>
</tr>
<tr class="even">
<td align="left">110</td>
<td align="right">21</td>
</tr>
<tr class="odd">
<td align="left">112</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">117</td>
<td align="right">1991</td>
</tr>
<tr class="odd">
<td align="left">125</td>
<td align="right">16</td>
</tr>
<tr class="even">
<td align="left">153</td>
<td align="right">80</td>
</tr>
<tr class="odd">
<td align="left">155</td>
<td align="right">27</td>
</tr>
<tr class="even">
<td align="left">157</td>
<td align="right">519</td>
</tr>
<tr class="odd">
<td align="left">159</td>
<td align="right">119</td>
</tr>
<tr class="even">
<td align="left">164</td>
<td align="right">26</td>
</tr>
<tr class="odd">
<td align="left">166</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">168</td>
<td align="right">219</td>
</tr>
<tr class="odd">
<td align="left">177</td>
<td align="right">173</td>
</tr>
<tr class="even">
<td align="left">178</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">179</td>
<td align="right">25</td>
</tr>
<tr class="even">
<td align="left">183</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">185</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">186</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">187</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">193</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">197</td>
<td align="right">50</td>
</tr>
<tr class="even">
<td align="left">198</td>
<td align="right">620</td>
</tr>
<tr class="odd">
<td align="left">199</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="left">204</td>
<td align="right">53</td>
</tr>
<tr class="odd">
<td align="left">211</td>
<td align="right">760</td>
</tr>
<tr class="even">
<td align="left">213</td>
<td align="right">2123</td>
</tr>
<tr class="odd">
<td align="left">214</td>
<td align="right">264</td>
</tr>
<tr class="even">
<td align="left">221</td>
<td align="right">3193</td>
</tr>
<tr class="odd">
<td align="left">223</td>
<td align="right">2515</td>
</tr>
<tr class="even">
<td align="left">224</td>
<td align="right">909</td>
</tr>
<tr class="odd">
<td align="left">231</td>
<td align="right">483</td>
</tr>
<tr class="even">
<td align="left">233</td>
<td align="right">330</td>
</tr>
<tr class="odd">
<td align="left">234</td>
<td align="right">56</td>
</tr>
<tr class="even">
<td align="left">241</td>
<td align="right">78</td>
</tr>
<tr class="odd">
<td align="left">243</td>
<td align="right">199</td>
</tr>
<tr class="even">
<td align="left">244</td>
<td align="right">61</td>
</tr>
<tr class="odd">
<td align="left">261</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">263</td>
<td align="right">254</td>
</tr>
<tr class="odd">
<td align="left">264</td>
<td align="right">95</td>
</tr>
<tr class="even">
<td align="left">265</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">266</td>
<td align="right">20</td>
</tr>
<tr class="even">
<td align="left">267</td>
<td align="right">2877</td>
</tr>
<tr class="odd">
<td align="left">268</td>
<td align="right">83</td>
</tr>
<tr class="even">
<td align="left">269</td>
<td align="right">2016</td>
</tr>
<tr class="odd">
<td align="left">273</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">285</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">293</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">360</td>
<td align="right">70</td>
</tr>
<tr class="odd">
<td align="left">361</td>
<td align="right">197</td>
</tr>
<tr class="even">
<td align="left">363</td>
<td align="right">58</td>
</tr>
<tr class="odd">
<td align="left">365</td>
<td align="right">16</td>
</tr>
<tr class="even">
<td align="left">366</td>
<td align="right">188</td>
</tr>
<tr class="odd">
<td align="left">367</td>
<td align="right">178</td>
</tr>
<tr class="even">
<td align="left">371</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">373</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">375</td>
<td align="right">44</td>
</tr>
<tr class="odd">
<td align="left">377</td>
<td align="right">294</td>
</tr>
<tr class="even">
<td align="left">379</td>
<td align="right">65</td>
</tr>
<tr class="odd">
<td align="left">380</td>
<td align="right">142</td>
</tr>
<tr class="even">
<td align="left">381</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">382</td>
<td align="right">532</td>
</tr>
<tr class="even">
<td align="left">383</td>
<td align="right">331</td>
</tr>
<tr class="odd">
<td align="left">384</td>
<td align="right">883</td>
</tr>
<tr class="even">
<td align="left">385</td>
<td align="right">41</td>
</tr>
<tr class="odd">
<td align="left">386</td>
<td align="right">4451</td>
</tr>
<tr class="even">
<td align="left">387</td>
<td align="right">150</td>
</tr>
<tr class="odd">
<td align="left">388</td>
<td align="right">1020</td>
</tr>
<tr class="even">
<td align="left">389</td>
<td align="right">314</td>
</tr>
<tr class="odd">
<td align="left">390</td>
<td align="right">587</td>
</tr>
<tr class="even">
<td align="left">391</td>
<td align="right">151</td>
</tr>
<tr class="odd">
<td align="left">392</td>
<td align="right">56</td>
</tr>
<tr class="even">
<td align="left">393</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">394</td>
<td align="right">190</td>
</tr>
<tr class="even">
<td align="left">395</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">396</td>
<td align="right">481</td>
</tr>
<tr class="even">
<td align="left">397</td>
<td align="right">4019</td>
</tr>
<tr class="odd">
<td align="left">398</td>
<td align="right">319</td>
</tr>
<tr class="even">
<td align="left">399</td>
<td align="right">552</td>
</tr>
<tr class="odd">
<td align="left">401</td>
<td align="right">362</td>
</tr>
<tr class="even">
<td align="left">402</td>
<td align="right">1568</td>
</tr>
<tr class="odd">
<td align="left">403</td>
<td align="right">1154</td>
</tr>
<tr class="even">
<td align="left">404</td>
<td align="right">1505</td>
</tr>
<tr class="odd">
<td align="left">405</td>
<td align="right">1266</td>
</tr>
<tr class="even">
<td align="left">406</td>
<td align="right">1041</td>
</tr>
<tr class="odd">
<td align="left">407</td>
<td align="right">321</td>
</tr>
<tr class="even">
<td align="left">408</td>
<td align="right">604</td>
</tr>
<tr class="odd">
<td align="left">409</td>
<td align="right">662</td>
</tr>
<tr class="even">
<td align="left">410</td>
<td align="right">968</td>
</tr>
<tr class="odd">
<td align="left">411</td>
<td align="right">923</td>
</tr>
<tr class="even">
<td align="left">412</td>
<td align="right">1963</td>
</tr>
<tr class="odd">
<td align="left">414</td>
<td align="right">177</td>
</tr>
<tr class="even">
<td align="left">415</td>
<td align="right">1158</td>
</tr>
<tr class="odd">
<td align="left">416</td>
<td align="right">658</td>
</tr>
<tr class="even">
<td align="left">417</td>
<td align="right">641</td>
</tr>
<tr class="odd">
<td align="left">418</td>
<td align="right">733</td>
</tr>
<tr class="even">
<td align="left">419</td>
<td align="right">637</td>
</tr>
<tr class="odd">
<td align="left">420</td>
<td align="right">629</td>
</tr>
<tr class="even">
<td align="left">421</td>
<td align="right">3796</td>
</tr>
<tr class="odd">
<td align="left">422</td>
<td align="right">1069</td>
</tr>
<tr class="even">
<td align="left">423</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">424</td>
<td align="right">1051</td>
</tr>
<tr class="even">
<td align="left">425</td>
<td align="right">1102</td>
</tr>
<tr class="odd">
<td align="left">426</td>
<td align="right">151</td>
</tr>
<tr class="even">
<td align="left">428</td>
<td align="right">145</td>
</tr>
<tr class="odd">
<td align="left">430</td>
<td align="right">574</td>
</tr>
<tr class="even">
<td align="left">431</td>
<td align="right">33</td>
</tr>
<tr class="odd">
<td align="left">432</td>
<td align="right">254</td>
</tr>
<tr class="even">
<td align="left">433</td>
<td align="right">1707</td>
</tr>
<tr class="odd">
<td align="left">434</td>
<td align="right">37</td>
</tr>
<tr class="even">
<td align="left">435</td>
<td align="right">41</td>
</tr>
<tr class="odd">
<td align="left">437</td>
<td align="right">499</td>
</tr>
<tr class="even">
<td align="left">438</td>
<td align="right">2595</td>
</tr>
<tr class="odd">
<td align="left">439</td>
<td align="right">1917</td>
</tr>
<tr class="even">
<td align="left">441</td>
<td align="right">3503</td>
</tr>
<tr class="odd">
<td align="left">442</td>
<td align="right">14</td>
</tr>
<tr class="even">
<td align="left">443</td>
<td align="right">750</td>
</tr>
<tr class="odd">
<td align="left">445</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">450</td>
<td align="right">52</td>
</tr>
<tr class="odd">
<td align="left">451</td>
<td align="right">740</td>
</tr>
<tr class="even">
<td align="left">455</td>
<td align="right">30</td>
</tr>
<tr class="odd">
<td align="left">457</td>
<td align="right">695</td>
</tr>
<tr class="even">
<td align="left">461</td>
<td align="right">232</td>
</tr>
<tr class="odd">
<td align="left">489</td>
<td align="right">111</td>
</tr>
<tr class="even">
<td align="left">493</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">494</td>
<td align="right">7</td>
</tr>
<tr class="even">
<td align="left">498</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">500</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">503</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">512</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">515</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">519</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">520</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">521</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">557</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">568</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">586</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">588</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">594</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">596</td>
<td align="right">78</td>
</tr>
<tr class="even">
<td align="left">640</td>
<td align="right">140</td>
</tr>
<tr class="odd">
<td align="left">644</td>
<td align="right">40</td>
</tr>
<tr class="even">
<td align="left">663</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">664</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">665</td>
<td align="right">88</td>
</tr>
<tr class="odd">
<td align="left">674</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">694</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">696</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">697</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">698</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">708</td>
<td align="right">116</td>
</tr>
<tr class="odd">
<td align="left">711</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">723</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">724</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">725</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">727</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="left">729</td>
<td align="right">608</td>
</tr>
<tr class="odd">
<td align="left">739</td>
<td align="right">3128</td>
</tr>
<tr class="even">
<td align="left">760</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">772</td>
<td align="right">41</td>
</tr>
<tr class="even">
<td align="left">779</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="left">781</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">792</td>
<td align="right">42</td>
</tr>
<tr class="odd">
<td align="left">793</td>
<td align="right">42</td>
</tr>
<tr class="even">
<td align="left">844</td>
<td align="right">21</td>
</tr>
<tr class="odd">
<td align="left">847</td>
<td align="right">64</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">5</td>
</tr>
</tbody>
</table>
<p>select top 10 crimes into a new dataset</p>
<pre class="r"><code>top_ten_crime = com_crime_nyc %&gt;%
  group_by(pd_desc, pd_cd) %&gt;%
  summarise(number = n()) %&gt;%
  ungroup() %&gt;%
  top_n(10, number) 
 # arrange(desc(number)) %&gt;%</code></pre>
<pre class="r"><code>mydataextract3 = list()
cc = top_ten_crime$pd_cd
for(j in 1:length(cc)){
  ind = cc[j]
#mydataextract =  com_crime_nyc[com_crime_nyc$pd_desc == cc, ]
mydataextract3[[j]] = com_crime_nyc[which(com_crime_nyc$pd_cd == ind, arr.ind = TRUE ), ]
mydataextract4 = do.call(rbind, mydataextract3)
} # has 397,023 obs</code></pre>
<p>consider suspects demographics by the top ten crimes suspect age group</p>
<pre class="r"><code> table(mydataextract4$susp_age_group)</code></pre>
<pre><code>## 
##      -2     -67     &lt;18    1014    1016   18-24    2016    2017   25-44 
##       1       1    6491       1       1   23252       2       2   53784 
##   45-64     65+     926     940     945 unknown 
##   17419    1083       1       1       1   29493</code></pre>
<pre class="r"><code>sort(table(mydataextract4$susp_age_group))</code></pre>
<pre><code>## 
##      -2     -67    1014    1016     926     940     945    2016    2017 
##       1       1       1       1       1       1       1       2       2 
##     65+     &lt;18   45-64   18-24 unknown   25-44 
##    1083    6491   17419   23252   29493   53784</code></pre>
<pre class="r"><code>#keep age groups &lt; 18, 18-24, 25-44, 45-64, 65+, unknown
agegroup=c(&#39;&lt;18&#39;, &#39;45-64&#39;,   &#39;18-24&#39;, &#39;unknown&#39;,   &#39;25-44&#39;, &#39;65+&#39; )
mydata=mydataextract4[mydataextract4$susp_age_group %in% agegroup,]
suspect_agetopten=table(mydata$pd_desc,mydata$susp_age_group)</code></pre>
<pre class="r"><code>suspect_agetopten2=as.data.frame(suspect_agetopten)
mycolnames=c(&#39;Crime&#39;, &#39;Agegroup&#39;, &#39;Freq&#39;)
colnames(suspect_agetopten2)=mycolnames
suspect_agetopten2 %&gt;%
group_by(Agegroup, Crime) %&gt;%
  ggplot(aes(x = Crime, y = Freq, color = Agegroup)) +
   geom_point() +
#   geom_smooth(se=FALSE) +
labs(
  title = &quot;Graph of crime frequency by age group&quot;,
  x = &quot;Crime &quot;,
  y = &quot;Freq&quot;
) +
  theme(axis.text.x = element_text(angle = 45, size = 7, hjust = 1))</code></pre>
<p><img src="Final_project_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>consider suspects demographics by the top ten crimes. suspect race</p>
<pre class="r"><code> table(mydataextract4$susp_race)</code></pre>
<pre><code>## 
## american indian/alaskan native       asian / pacific islander 
##                            339                           5436 
##                          black                 black hispanic 
##                          61228                           8165 
##                        unknown                          white 
##                          19207                          11434 
##                 white hispanic 
##                          25724</code></pre>
<pre class="r"><code>sort(table(mydataextract4$susp_race))</code></pre>
<pre><code>## 
## american indian/alaskan native       asian / pacific islander 
##                            339                           5436 
##                 black hispanic                          white 
##                           8165                          11434 
##                        unknown                 white hispanic 
##                          19207                          25724 
##                          black 
##                          61228</code></pre>
<pre class="r"><code>#keep age groups &lt; 18, 18-24, 25-44, 45-64, 65+, unknown
suspect_racetopten=table(mydata$pd_desc,mydata$susp_race)</code></pre>
<pre class="r"><code>suspect_racetopten2=as.data.frame(suspect_racetopten)
mycolnames=c(&#39;Crime&#39;, &#39;Race&#39;, &#39;Freq&#39;)
colnames(suspect_racetopten2)=mycolnames
suspect_racetopten2 %&gt;%
group_by(Race, Crime) %&gt;%
  ggplot(aes(x = Crime, y = Freq, color = Race)) +
   geom_point() +
#   geom_smooth(se=FALSE) +
labs(
  title = &quot;Graph of crime frequency by race&quot;,
  x = &quot;Crime &quot;,
  y = &quot;Freq&quot;
) +
  theme(axis.text.x = element_text(angle = 45, size = 7, hjust = 1))</code></pre>
<p><img src="Final_project_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>sex</p>
<pre class="r"><code>table(mydataextract4$susp_sex)</code></pre>
<pre><code>## 
##     f     m     u 
## 20936 95522 15075</code></pre>
<pre class="r"><code>sort(table(mydataextract4$susp_sex))</code></pre>
<pre><code>## 
##     u     f     m 
## 15075 20936 95522</code></pre>
<pre class="r"><code>#keep age groups &lt; 18, 18-24, 25-44, 45-64, 65+, unknown
suspect_sextopten=table(mydata$pd_desc,mydata$susp_sex)
suspect_sextopten</code></pre>
<pre><code>##                                     
##                                          f     m     u
##   assault 2,1,unclassified           11512 27308  5444
##   burglary,residence,day               259  2615  2507
##   criminal contempt 1                 4505 20737   210
##   forgery,etc.,unclassified-felo       661  7013   441
##   mischief, criminal 3 &amp; 2, of m       576  2337  2420
##   mischief,criminal,    uncl 2nd      1477  6070  1128
##   robbery,open area unclassified       444  7191  1362
##   robbery,personal electronic device   651  8840  1439
##   strangulation 1st                    601  7461    96
##   weapons possession 3                 249  5942    26</code></pre>
<pre class="r"><code>suspect_sextopten2=as.data.frame(suspect_sextopten)
mycolnames=c(&#39;Crime&#39;, &#39;Sex&#39;, &#39;Freq&#39;)
colnames(suspect_sextopten2)=mycolnames
suspect_sextopten2 %&gt;%
group_by(Sex, Crime) %&gt;%
  ggplot(aes(x = Crime, y = Freq, color = Sex)) +
   geom_point() +
#   geom_smooth(se=FALSE) +
labs(
  title = &quot;Graph of crime frequency by sex&quot;,
  x = &quot;Crime &quot;,
  y = &quot;Freq&quot;
) +
  theme(axis.text.x = element_text(angle = 45, size = 7, hjust = 1))</code></pre>
<p><img src="Final_project_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
